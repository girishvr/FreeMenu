<!-- restaurant_list.html -->


{% extends 'base.html' %}


{% block content %}

	<head>
        <meta charset="utf-8">
        <title>Free Menu</title>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='index_custom.css') }}"/>
    </head>


	<body>
   
      </br>
      <h2>Restaurant on FreeMenu App</h2>
      <hr>
      </br>      

      <table class="styled-table">
          <thead>
              <tr>
                  <th> # </th>
                  <th>Restaurant Name</th>
                  <th>Location</th>
              </tr>
          </thead>
          <tbody>
              {% for item in results %}
               <tr onclick="loadRestaurant({{ item['rest_id'] }}, '{{ item['restaurant_title'] }}')">
                  <td> {{ item['rest_id'] }} </td>
                  <td> {{ item['restaurant_title'] }} </td>
                  <td> {{ item['restaurant_location'] }} </td>
               </tr>
               {% endfor %}
          </tbody>
      </table>

      <script>
  
        function loadRestaurant(index, rest_name){
            console.log(rest_name);
            let data = { "rest_id": index, "rest_name" : rest_name};

          // Call postData function - GET 
                postData('http://localhost:5000/restaurant_menu',
                    data, "GET");
        }

      </script>

      </br>

      <!-- -------------------Modal To Add New Restaurant------------------------ -->
      
      <button type="button" class="pheasant-demure-button solid dark" id="form" >
        <span class="label">ADD NEW RESTAURANT</span>
      </button>

      <script>

         $('#form').on('click', function(){
            silverBox({

               customIcon: "/static/images/dinner.png",
               title: {
                      text: "Add New Restaurant"
               },
               centerContent: true,
               text: "Enter Restaurant Information",
               footer: "<a href='#'>Need More Information?</a>",
               showCloseButton: true,
               input: [
                      {
                             label: "Restaurant Name",
                             type: "text",                          
                             placeHolder: "Enter Restaurant Name",
                             value : "{{rest_name}}",
                             id: "rest_name",                          
                             maxLength: 30
                      },
                      {
                             label: "Location",
                             type: "text",
                             placeHolder: "Enter Restaurant Address",
                             id: "rest_loc",   
                             hint: "Enter short address"
                      }
               ],
                 confirmButton: {
                      text: "Save",
                      closeOnClick: true,
                      onClick : () => {
                        addNewRestaurant()
                      }
               },
               cancelButton: {
                  closeOnClick: true
               }

          })

         })
               
        function addNewRestaurant() {
          var rest_name = document.getElementById("rest_name").value;
          var rest_loc = document.getElementById("rest_loc").value;

          if (rest_name == "" || rest_loc == ""){
            showFailPrompt();
            return;
          }

          let data = { rest_name: rest_name, restaurant_loc: rest_loc};

          // Call postData function   
                postData('http://localhost:5000/create_new',
                    data, "POST");

        }

      </script>
      <!-- -------------------END of Modal To Add New Restaurant------------------------ -->

  


{% endblock %}


